<!DOCTYPE html>
<html>
<head>
  <title>Sentiment Analyzer</title>
  <meta charset="UTF-8">
</head>
<body>
  <h2>Sentiment Analysis</h2>
  <textarea id="textInput" rows="5" cols="50" placeholder="Enter your text here..."></textarea><br><br>
  <button onclick="analyzeSentiment()">Analyze</button>

  <h3>Result:</h3>
  <pre id="result"></pre>

  <script>
    async function analyzeSentiment() {
      const text = document.getElementById("textInput").value;
      const resultBox = document.getElementById("result");
      resultBox.textContent = "⏳ Analyzing...";

      try {
        const response = await fetch("https://dvg0y3w6t9.execute-api.us-east-1.amazonaws.com/prod/sentiment", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ text: text })
        });

        if (!response.ok) {
          const errorText = await response.text();
          throw new Error(`Status ${response.status}: ${errorText}`);
        }

        const data = await response.json();
        const parsed = JSON.parse(data.body);

        resultBox.textContent = `✅ Sentiment: ${parsed.sentiment}\nConfidence: ${JSON.stringify(parsed.confidence, null, 2)}`;
        console.log("Full response:", parsed);

      } catch (error) {
        console.error("Fetch error:", error);
        resultBox.textContent = "❌ Error: " + error.message;
      }
    }
  </script>
</body>
</html>
